<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Mark Hazleton" />
    
    <!-- RSS Feed -->
    <link
      rel="alternate"
      type="application/rss+xml"
      title="Mark Hazleton's Blog"
      href="/feed.xml"
    />
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png" />
    <link rel="manifest" href="/site.webmanifest" />
    
    <!-- Preconnect to fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://i.ytimg.com" />
    <link rel="preconnect" href="https://api.allorigins.win" />

    <!-- DNS prefetch for faster resolution -->
    <link rel="dns-prefetch" href="https://www.googletagmanager.com" />
    <link rel="dns-prefetch" href="https://www.google-analytics.com" />
    <link rel="dns-prefetch" href="https://www.clarity.ms" />

    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#1e293b" media="(prefers-color-scheme: dark)" />
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L8GVZNDH0B"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-L8GVZNDH0B');
    </script>

    <!-- Microsoft Clarity -->
    <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "d628hovv63");
    </script>

    <title>Concurrent Processing in C# | Mark Hazleton</title><meta name="description" content="Learn concurrent processing through hands-on C# development. Explore SemaphoreSlim, task management, and best practices for building scalable multi-threaded applications."><meta name="keywords" content="concurrent processing, C#, SemaphoreSlim, async programming, multithreading, task parallelism, thread safety, scalability"><meta property="og:type" content="article"><meta property="og:title" content="Concurrent Processing in C# | Mark Hazleton"><meta property="og:description" content="Learn concurrent processing through hands-on C# development. Explore SemaphoreSlim, task management, and best practices for building scalable multi-threaded applications."><meta property="og:url" content="https://markhazleton.com/blog/concurrent-processing"><meta property="og:site_name" content="Mark Hazleton"><meta property="og:image" content="https://markhazleton.com/img/ArgostoliGreeceBeach.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Concurrent Processing in C# | Mark Hazleton"><meta name="twitter:description" content="Learn concurrent processing through hands-on C# development. Explore SemaphoreSlim, task management, and best practices for building scalable multi-threaded applications."><meta name="twitter:image" content="https://markhazleton.com/img/ArgostoliGreeceBeach.jpg"><link rel="canonical" href="https://markhazleton.com/blog/concurrent-processing"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Concurrent Processing in C#","description":"Learn concurrent processing through hands-on C# development. Explore SemaphoreSlim, task management, and best practices for building scalable multi-threaded applications.","author":{"@type":"Person","name":"Mark Hazleton","url":"https://markhazleton.com"},"datePublished":"2026-01-25","publisher":{"@type":"Person","name":"Mark Hazleton"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://markhazleton.com/blog/concurrent-processing"},"dateModified":"2026-01-25","image":"https://markhazleton.com/img/ArgostoliGreeceBeach.jpg","keywords":"concurrent processing, C#, SemaphoreSlim, async programming, multithreading, task parallelism, thread safety, scalability","articleSection":"Uncategorized","timeRequired":"PT12M"}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://markhazleton.com"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://markhazleton.com/blog"},{"@type":"ListItem","position":3,"name":"Concurrent Processing in C#","item":"https://markhazleton.com/blog/concurrent-processing"}]}</script>
    <script type="module" crossorigin src="/assets/site-CXV_bFaW.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/site-CCRkRcvr.css">
  </head>
  <body>
    <div id="root"><div class="min-h-screen flex flex-col"><header class="sticky top-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 border-b border-border"><div class="container-wide"><div class="flex h-16 items-center justify-between"><a class="font-heading text-xl font-semibold text-foreground hover:text-primary transition-colors" href="/" data-discover="true">Mark Hazleton</a><nav class="hidden md:flex items-center gap-1"><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-muted-foreground hover:text-foreground hover:bg-muted" href="/" data-discover="true">Home</a><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-muted-foreground hover:text-foreground hover:bg-muted" href="/blog" data-discover="true">Blog</a><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-muted-foreground hover:text-foreground hover:bg-muted" href="/projects" data-discover="true">Projects</a><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-muted-foreground hover:text-foreground hover:bg-muted" href="/github" data-discover="true">GitHub</a><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-muted-foreground hover:text-foreground hover:bg-muted" href="/videos" data-discover="true">Videos</a><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-muted-foreground hover:text-foreground hover:bg-muted" href="/contact" data-discover="true">Contact</a><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10 ml-2" aria-label="Toggle dark mode"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon h-4 w-4" aria-hidden="true"><path d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"></path></svg></button></nav><div class="flex items-center gap-2 md:hidden"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10" aria-label="Toggle dark mode"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon h-4 w-4" aria-hidden="true"><path d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"></path></svg></button><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10" aria-label="Toggle menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5" aria-hidden="true"><path d="M4 5h16"></path><path d="M4 12h16"></path><path d="M4 19h16"></path></svg></button></div></div></div></header><main class="flex-1"><article class="section"><div class="container-wide"><div class="max-w-4xl mx-auto"><a class="inline-flex items-center text-sm text-muted-foreground hover:text-primary transition-colors mb-8" href="/blog" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left h-4 w-4 mr-2" aria-hidden="true"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>Back to blog</a><header class="mb-8 animate-fade-up"><div class="flex flex-wrap gap-2 mb-4"><a class="tag-pill hover:tag-pill-active" href="/blog?tag=Uncategorized" data-discover="true">Uncategorized</a></div><h1 class="font-heading text-3xl sm:text-4xl lg:text-5xl font-bold text-foreground mb-6 leading-tight">Concurrent Processing in C#</h1><div class="flex flex-wrap items-center gap-4 text-sm text-muted-foreground mb-6"><span class="flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar h-4 w-4" aria-hidden="true"><path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path></svg>January 25, 2026</span><span class="flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock h-4 w-4" aria-hidden="true"><path d="M12 6v6l4 2"></path><circle cx="12" cy="12" r="10"></circle></svg>12 min<!-- --> read</span><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3 ml-auto"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-share2 lucide-share-2 h-4 w-4 mr-2" aria-hidden="true"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"></line><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"></line></svg>Share</button></div><p class="text-xl text-muted-foreground leading-relaxed">Learn concurrent processing through hands-on C# development. Explore SemaphoreSlim, task management, and best practices for building scalable multi-threaded applications.</p></header><div class="lg:grid lg:grid-cols-[1fr_200px] lg:gap-8"><div class="prose-blog"><h1>Concurrent Processing in C#</h1>
<p><strong>Learning Concurrent Processing Through Code</strong></p>
<blockquote>
<p>View the complete source code on GitHub: <a href="https://github.com/markhazleton/concurrentprocessing/">ConcurrentProcessing Repository</a></p>
</blockquote>
<p>As a developer, one of the most exciting aspects of programming is the opportunity to learn new concepts and techniques. Recently, I embarked on a journey to understand concurrent processing better, and I&#x27;m excited to share my experience with you.</p>
<p>The idea of managing multiple tasks simultaneously has always fascinated me. However, it can be a complex challenge, requiring synchronization and careful management to avoid issues like race conditions and deadlocks. To dive into this topic, I decided to develop a C# console application that would allow me to experiment and learn practically.</p>
<h2 id="considerations-for-concurrent-processing">Considerations for Concurrent Processing</h2>
<h3 id="task-autonomy-and-independence">Task Autonomy and Independence</h3>
<p>For multiple tasks to effectively run concurrently, each task must encapsulate an autonomous and self-contained unit of functionality. Autonomy ensures that a task operates independently, free from unnecessary dependencies on other tasks or shared resources.</p>
<h3 id="synchronization">Synchronization</h3>
<p>Ensuring proper synchronization is crucial to prevent race conditions and ensure data consistency among multiple threads or tasks. Techniques like locks, semaphores, and monitors can be used to control access to shared resources.</p>
<h3 id="scalability">Scalability</h3>
<p>Consider the scalability of your concurrent processing solution. Will it perform well as the number of concurrent tasks or threads increases? Design your system to handle increased load without degrading performance.</p>
<h3 id="deadlocks-and-livelocks">Deadlocks and Livelocks</h3>
<p>Be aware of potential deadlocks and livelocks that can occur when multiple threads are waiting for resources that are held by other threads. Avoid circular dependencies and ensure proper resource allocation/release.</p>
<h3 id="resource-management">Resource Management</h3>
<p>Properly manage resources such as memory, file handles, and network connections. Failing to release resources can lead to resource exhaustion and degrade system performance.</p>
<h3 id="thread-safety">Thread Safety</h3>
<p>Ensure that your code is thread-safe. Thread safety means that the behavior of a program remains consistent when multiple threads are executing simultaneously. Use techniques like immutable data, synchronization, and thread-local storage.</p>
<h3 id="load-balancing">Load Balancing</h3>
<p>Distribute tasks evenly among threads or processing units to ensure efficient utilization of resources. Load balancing helps prevent scenarios where some threads are idle while others are overloaded.</p>
<h3 id="task-granularity">Task Granularity</h3>
<p>Determine the appropriate level of task granularity. Too fine-grained tasks can lead to overhead due to thread management, while too coarse-grained tasks might not fully utilize available resources.</p>
<h3 id="error-handling">Error Handling</h3>
<p>Implement robust error-handling mechanisms for concurrent tasks. Unhandled exceptions in one task should not crash the entire application.</p>
<h3 id="testing-and-debugging">Testing and Debugging</h3>
<p>Testing concurrent code is challenging. Consider using techniques like stress testing and race condition detection tools to identify issues. Debugging concurrent issues can be complex.</p>
<h3 id="communication-and-coordination">Communication and Coordination</h3>
<p>Threads or tasks might need to communicate and coordinate with each other. Consider using mechanisms like message queues, shared memory, and events to facilitate inter-thread communication.</p>
<h2 id="potential-drawbacks-in-concurrent-programming">Potential Drawbacks in Concurrent Programming</h2>
<p>While concurrent programming boosts performance and resource utilization, it comes with challenges:</p>
<ul>
<li><strong>Risk of Deadlocks and Livelocks</strong>: Multiple threads waiting for each other can cause system freezes</li>
<li><strong>Difficulty in Debugging and Testing</strong>: Race conditions and timing issues are hard to reproduce</li>
<li><strong>Potential for Race Conditions</strong>: Unsynchronized access to shared data can corrupt state</li>
<li><strong>Increased Memory Consumption</strong>: Each thread requires its own stack space</li>
<li><strong>Complexity in Code Management and Maintenance</strong>: Concurrent code is harder to reason about and modify</li>
</ul>
<p>By understanding these challenges, developers can employ strategies to mitigate risks and harness the benefits of concurrency in their projects.</p>
<h2 id="building-the-concurrent-processing-demo">Building the Concurrent Processing Demo</h2>
<p>Since this was a one-off project, I didn&#x27;t want to spend too much time on the user interface. I created a repository to create a simple console application that would allow me to focus on the core functionality.</p>
<p><a href="https://github.com/markhazleton/ConcurrentProcessing">View the Concurrent Processing C# Project on GitHub</a></p>
<p>I started with a ChatGPT prompt that introduced me to the basics of concurrent processing. Armed with this initial guidance, I started writing the code. Before long I had the basic scaffolding in place, and I was ready to start iterating and learning.</p>
<h3 id="core-concurrent-processing-logic">Core Concurrent Processing Logic</h3>
<div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code class="language-csharp">const int maxConcurrency = 100; // Maximum concurrent tasks allowed
SemaphoreSlim semaphore = new(maxConcurrency);
List&lt;Task&gt; tasks = new();
int? taskId = 0;

while (taskId is not null)
{
    Task task = ProcessAsync(taskId.Value, tasks.Count, await AwaitSemaphoreAsync(semaphore), semaphore);
    tasks.Add(task);
    taskId = GetNextTaskId(taskId);

    if (tasks.Count &gt;= maxConcurrency)
    {
        Task finishedTask = await Task.WhenAny(tasks);
        tasks.Remove(finishedTask);
    }
}

await Task.WhenAll(tasks);</code></pre></div>
<p>I created a function to wait for a semaphore to be released and added some telemetry to track the time spent waiting.</p>
<h3 id="semaphore-wait-function">Semaphore Wait Function</h3>
<div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code class="language-csharp">// Wait for semaphore to be released so that next task can start
static async Task&lt;long&gt; AwaitSemaphoreAsync(SemaphoreSlim semaphore)
{
    Stopwatch stopwatch = Stopwatch.StartNew();
    await semaphore.WaitAsync();
    stopwatch.Stop();
    return stopwatch.ElapsedTicks;
}</code></pre></div>
<p>I created a mock async processing method that simulates work by delaying for a random amount of time. I also added telemetry data so that I could track the task ID, task count, semaphore count, and wait time. I used the <div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code>Task.Delay</code></pre></div> method to simulate work, but in a real-world application, this would be replaced with actual work.</p>
<h3 id="mock-processing-task">Mock Processing Task</h3>
<div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code class="language-csharp">// Mock Async Task to simulate work
static async Task ProcessAsync(int taskId, int taskCount, long waitTicks, SemaphoreSlim semaphore)
{
    try
    {
        await Task.Delay(TimeSpan.FromMilliseconds(new Random().Next(1, 500)));
        Console.WriteLine(<!--app-html-->quot;Task:{taskId:D3} T:{taskCount} S:{semaphore.CurrentCount} W:{waitTicks}&quot;);
    }
    finally
    {
        semaphore.Release();
    }
}</code></pre></div>
<p>Finally, I created a function to generate the next task ID. This is how I controlled the number of tasks that were created.</p>
<h3 id="task-id-generator">Task ID Generator</h3>
<div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code class="language-csharp">// Get Next Task ID
static int? GetNextTaskId(int? taskId)
{
    if (taskId &lt; 1000) return taskId + 1;
    else return null;
}</code></pre></div>
<h2 id="understanding-task-whenall-vs-task-whenany">Understanding Task.WhenAll vs Task.WhenAny</h2>
<p>One of the key insights from building this application was understanding when to use <div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code>Task.WhenAll</code></pre></div> versus <div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code>Task.WhenAny</code></pre></div>, and more importantly, how to handle failures gracefully in concurrent scenarios.</p>
<h3 id="task-whenany-managing-active-task-limits">Task.WhenAny: Managing Active Task Limits</h3>
<p>In the main processing loop, we use <div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code>Task.WhenAny</code></pre></div> to maintain a maximum number of concurrent tasks:</p>
<div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code class="language-csharp">if (tasks.Count &gt;= maxConcurrency)
{
    Task finishedTask = await Task.WhenAny(tasks);
    tasks.Remove(finishedTask);
}</code></pre></div>
<p><strong>Task.WhenAny</strong> returns as soon as <strong>any one</strong> task completes (successfully or with an exception). This allows us to:</p>
<ul>
<li>Keep the active task count at or below our maximum</li>
<li>Process tasks in a rolling window pattern</li>
<li>Maintain system resource limits without blocking new work</li>
</ul>
<h3 id="task-whenall-ensuring-complete-execution">Task.WhenAll: Ensuring Complete Execution</h3>
<p>After the loop, we use <div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code>Task.WhenAll</code></pre></div> to wait for all remaining tasks:</p>
<div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code class="language-csharp">await Task.WhenAll(tasks);</code></pre></div>
<p><strong>Task.WhenAll</strong> waits for <strong>all tasks</strong> to complete before continuing. However, there&#x27;s a critical caveat: if any task throws an exception, <div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code>Task.WhenAll</code></pre></div> will throw an <div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code>AggregateException</code></pre></div> containing all the exceptions, but <strong>only after all tasks complete</strong>.</p>
<h3 id="the-black-box-problem-handling-individual-task-failures">The Black Box Problem: Handling Individual Task Failures</h3>
<p>The challenge with <div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code>Task.WhenAll</code></pre></div> is that failed tasks can become a &quot;black box&quot; - you lose visibility into which specific tasks failed and why. Here&#x27;s how to solve this:</p>
<h4>Approach 1: Wrapper with Try-Catch and Logging</h4>
<div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code class="language-csharp">static async Task SafeProcessAsync(int taskId, int taskCount, long waitTicks, SemaphoreSlim semaphore)
{
    try
    {
        await ProcessAsync(taskId, taskCount, waitTicks, semaphore);
    }
    catch (Exception ex)
    {
        // Log the failure with full context
        Console.WriteLine(<!--app-html-->quot;Task {taskId} FAILED: {ex.Message}&quot;);
        // Optionally: Log to telemetry system, database, etc.
        // DO NOT rethrow - this prevents one failure from masking others
    }
}</code></pre></div>
<h4>Approach 2: Return Results with Status</h4>
<div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code class="language-csharp">public class TaskResult
{
    public int TaskId { get; set; }
    public bool Success { get; set; }
    public Exception? Error { get; set; }
    public long ElapsedTicks { get; set; }
}

static async Task&lt;TaskResult&gt; ProcessWithResultAsync(int taskId, int taskCount, long waitTicks, SemaphoreSlim semaphore)
{
    var result = new TaskResult { TaskId = taskId };
    try
    {
        var stopwatch = Stopwatch.StartNew();
        await Task.Delay(TimeSpan.FromMilliseconds(new Random().Next(1, 500)));
        stopwatch.Stop();
        
        result.Success = true;
        result.ElapsedTicks = stopwatch.ElapsedTicks;
        Console.WriteLine(<!--app-html-->quot;Task:{taskId:D3} SUCCESS T:{taskCount} S:{semaphore.CurrentCount}&quot;);
    }
    catch (Exception ex)
    {
        result.Success = false;
        result.Error = ex;
        Console.WriteLine(<!--app-html-->quot;Task:{taskId:D3} FAILED: {ex.Message}&quot;);
    }
    finally
    {
        semaphore.Release();
    }
    return result;
}</code></pre></div>
<p>Then collect and analyze results:</p>
<div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code class="language-csharp">// Change Task list to Task&lt;TaskResult&gt;
List&lt;Task&lt;TaskResult&gt;&gt; tasks = new();

// ... add tasks ...

// Wait for all to complete
TaskResult[] results = await Task.WhenAll(tasks);

// Analyze results
var successful = results.Count(r =&gt; r.Success);
var failed = results.Count(r =&gt; !r.Success);
Console.WriteLine(<!--app-html-->quot;\nCompleted: {successful} succeeded, {failed} failed&quot;);

// Log detailed failure information
foreach (var failure in results.Where(r =&gt; !r.Success))
{
    Console.WriteLine(<!--app-html-->quot;Task {failure.TaskId} error: {failure.Error?.Message}&quot;);
}</code></pre></div>
<h4>Approach 3: Handle WhenAll Exceptions Explicitly</h4>
<div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code class="language-csharp">try
{
    await Task.WhenAll(tasks);
}
catch (Exception)
{
    // Task.WhenAll wraps exceptions in AggregateException
    // Check each task individually for failures
    foreach (var task in tasks)
    {
        if (task.IsFaulted &amp;&amp; task.Exception != null)
        {
            foreach (var ex in task.Exception.InnerExceptions)
            {
                Console.WriteLine(<!--app-html-->quot;Task failed with: {ex.Message}&quot;);
                // Log to your telemetry system
            }
        }
    }
}</code></pre></div>
<h3 id="best-practices-for-robust-concurrent-processing">Best Practices for Robust Concurrent Processing</h3>
<ol>
<li><strong>Never Let Exceptions Bubble Silently</strong>: Always log task failures with enough context to diagnose issues</li>
<li><strong>Track Task Identity</strong>: Include task IDs or correlation IDs in all logging</li>
<li><strong>Use Structured Logging</strong>: Log to a centralized system (Application Insights, Serilog, etc.)</li>
<li><strong>Consider Circuit Breakers</strong>: If many tasks fail, stop creating new ones</li>
<li><strong>Monitor Metrics</strong>: Track success/failure rates, execution times, and semaphore wait times</li>
<li><strong>Graceful Degradation</strong>: Design your system to continue processing even when individual tasks fail</li>
</ol>
<h3 id="summary-table-whenall-vs-whenany">Summary Table: WhenAll vs WhenAny</h3>
<div class="table-wrapper"><table node="[object Object]"><thead><tr><th>Aspect</th><th>Task.WhenAll</th><th>Task.WhenAny</th></tr></thead><tbody><tr><td><strong>Completes When</strong></td><td>All tasks finish</td><td>First task finishes</td></tr><tr><td><strong>Use Case</strong></td><td>Final synchronization, batch operations</td><td>Managing active task limits, racing operations</td></tr><tr><td><strong>Exception Handling</strong></td><td>Throws if any task fails (after all complete)</td><td>Returns immediately, check task.IsFaulted</td></tr><tr><td><strong>Return Value</strong></td><td>Array of all results</td><td>The single completed task</td></tr><tr><td><strong>Performance</strong></td><td>Waits for slowest task</td><td>Returns quickly, processes in rolling window</td></tr></tbody></table></div>
<p>By understanding these patterns, you can build concurrent systems that are both powerful and observable, avoiding the &quot;black box&quot; problem where failures go unnoticed.</p>
<h2 id="iterating-and-learning">Iterating and Learning</h2>
<p>As I dove into the code, I realized that understanding concurrent processing goes beyond just knowing how to create threads or tasks. I needed to comprehend the concept of synchronization and how to manage the number of concurrently executing tasks. The code I had started with was a great foundation, but it required iteration and refinement to achieve my goals.</p>
<p>The heart of the application was the use of the <strong>SemaphoreSlim</strong> class, which acted as a gatekeeper to control the number of tasks running concurrently. This was a crucial lesson in managing shared resources and preventing resource exhaustion.</p>
<h2 id="experimenting-and-observing">Experimenting and Observing</h2>
<p>With each iteration of the code, I ran the application and observed its behavior. The output of the program provided valuable insights into how tasks were being managed, the time each task spent waiting for a semaphore, and the overall concurrency control.</p>
<h3 id="sample-output">Sample Output</h3>
<div class="code-block"><button type="button" class="code-copy" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre><code>...
Task:061 T:61 S:2 W:2
Task:070 T:70 S:0 W:4
Task:037 T:37 S:0 W:2
Task:018 T:18 S:3 W:2
Task:023 T:23 S:1 W:2
Task:026 T:26 S:2 W:3
...</code></pre></div>
<p>The output highlighted the dynamic nature of concurrent processing, where tasks were processed and released in a controlled manner, ensuring that the maximum concurrency was maintained while avoiding resource contention.</p>
<h2 id="celebrating-success">Celebrating Success</h2>
<p>After several iterations, moments of frustration, and numerous debug sessions, I finally achieved my desired result. The application was now a well-functioning demonstration of concurrent processing, showcasing my newfound understanding of synchronization and resource management.</p>
<p>The journey was not just about the code; it was about the learning process itself. Developing this console application was a great learning tool that allowed me to grasp the intricacies of concurrent processing hands-on. It transformed abstract concepts into tangible knowledge.</p>
<h2 id="conclusion">Conclusion</h2>
<p>The world of concurrent processing is complex and fascinating. Through the development of this C# console application, I gained valuable insights into managing multiple tasks simultaneously while avoiding common pitfalls. The iterative process of refining the code helped me internalize the concepts and apply them effectively.</p>
<p>I encourage fellow developers to try learning through practical coding. It&#x27;s one thing to read about a topic, but a whole different experience to see it in action and work through challenges firsthand.</p>
<p><strong>Happy coding and exploring the world of concurrency!</strong></p>
<h2 id="ready-for-the-next-level">Ready for the Next Level?</h2>
<p>Now that you&#x27;ve explored the fundamentals of concurrent processing with SemaphoreSlim, you&#x27;re ready to tackle more advanced scenarios. Learn how to manage concurrent lists of tasks with different return types, robust error handling, and comprehensive telemetry.</p>
<p><a href="/task-list-processor">Explore TaskListProcessor: Advanced Concurrent Operations</a></p>
<h2 id="the-semaphoreslim-class">The SemaphoreSlim Class</h2>
<p>The <strong>SemaphoreSlim</strong> class in .NET presents a robust solution for fine-tuning resource utilization. This lightweight semaphore is designed for scenarios where wait times are expected to be short, making it ideal for controlling the number of tasks executing in parallel within a single process.</p>
<p>The <strong>SemaphoreSlim</strong> class offers a simple, yet effective way to limit the number of threads that can access a specific resource or a pool of resources concurrently. This is particularly useful in scenarios where you need to throttle the usage of resources like network bandwidth or CPU time, preventing the system from being overwhelmed.</p>
<p>When integrating <strong>SemaphoreSlim</strong> into the Task List Processor, it allows precise control over the number of tasks running simultaneously. By setting the maximum concurrent tasks, we ensure efficient execution without overloading the system, especially crucial in high-load situations.</p>
<p>For more detailed information on <strong>SemaphoreSlim</strong>, its usage, and examples, visit the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.semaphoreslim">Microsoft Documentation on SemaphoreSlim</a>.</p>
<h3 id="semaphore-vs-semaphoreslim-in-net">Semaphore vs SemaphoreSlim in .NET</h3>
<p>Choose <strong>Semaphore</strong> when you need inter-process synchronization or when dealing with named semaphores for system-wide visibility. Opt for <strong>SemaphoreSlim</strong> for more lightweight, intra-process synchronization where performance and efficiency are key considerations.</p>
<h4>Semaphore</h4>
<ul>
<li><strong>Nature</strong>: A wrapper around the Win32 semaphore object, suitable for local or system-wide named semaphores.</li>
<li><strong>Usage</strong>: Ideal for thread synchronization across multiple processes or for inter-process communication.</li>
<li><strong>Performance</strong>: Slower and more resource-intensive, relying on the system&#x27;s kernel mode.</li>
<li><strong>Functionality</strong>: Supports system-wide visibility and waiting on multiple semaphores.</li>
<li><strong>Example</strong>: Synchronizing resource access across different applications on the same system.</li>
<li><strong>Pros</strong>: Visibility across processes, suitable for complex synchronization.</li>
<li><strong>Cons</strong>: Heavier, slower, and suitable for long wait times. Involves kernel transitions.</li>
</ul>
<h4>SemaphoreSlim</h4>
<ul>
<li><strong>Nature</strong>: Lightweight and fast, designed for use within a single process.</li>
<li><strong>Usage</strong>: Best for short wait times and scenarios confined to a single process.</li>
<li><strong>Performance</strong>: More efficient in memory and speed, using CLR synchronization primitives.</li>
<li><strong>Functionality</strong>: Does not support named semaphores or system-wide visibility.</li>
<li><strong>Example</strong>: Limiting concurrent calls to an external service in a web server application.</li>
<li><strong>Pros</strong>: Faster, more memory-efficient, suited for fine-grained control within an app.</li>
<li><strong>Cons</strong>: Not suitable for inter-process communication, lacks system-wide visibility.</li>
</ul></div><aside class="hidden lg:block"><div class="sticky top-24"><nav class="paper-card p-4"><h4 class="font-heading font-semibold text-sm text-foreground mb-3">On this page</h4><ul class="space-y-2"><li style="padding-left:0px"><a href="#considerations-for-concurrent-processing" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Considerations for Concurrent Processing</a></li><li style="padding-left:12px"><a href="#task-autonomy-and-independence" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Task Autonomy and Independence</a></li><li style="padding-left:12px"><a href="#synchronization" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Synchronization</a></li><li style="padding-left:12px"><a href="#scalability" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Scalability</a></li><li style="padding-left:12px"><a href="#deadlocks-and-livelocks" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Deadlocks and Livelocks</a></li><li style="padding-left:12px"><a href="#resource-management" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Resource Management</a></li><li style="padding-left:12px"><a href="#thread-safety" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Thread Safety</a></li><li style="padding-left:12px"><a href="#load-balancing" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Load Balancing</a></li><li style="padding-left:12px"><a href="#task-granularity" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Task Granularity</a></li><li style="padding-left:12px"><a href="#error-handling" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Error Handling</a></li><li style="padding-left:12px"><a href="#testing-and-debugging" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Testing and Debugging</a></li><li style="padding-left:12px"><a href="#communication-and-coordination" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Communication and Coordination</a></li><li style="padding-left:0px"><a href="#potential-drawbacks-in-concurrent-programming" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Potential Drawbacks in Concurrent Programming</a></li><li style="padding-left:0px"><a href="#building-the-concurrent-processing-demo" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Building the Concurrent Processing Demo</a></li><li style="padding-left:12px"><a href="#core-concurrent-processing-logic" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Core Concurrent Processing Logic</a></li><li style="padding-left:12px"><a href="#semaphore-wait-function" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Semaphore Wait Function</a></li><li style="padding-left:12px"><a href="#mock-processing-task" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Mock Processing Task</a></li><li style="padding-left:12px"><a href="#task-id-generator" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Task ID Generator</a></li><li style="padding-left:0px"><a href="#understanding-task-whenall-vs-task-whenany" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Understanding Task.WhenAll vs Task.WhenAny</a></li><li style="padding-left:12px"><a href="#task-whenany-managing-active-task-limits" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Task.WhenAny: Managing Active Task Limits</a></li><li style="padding-left:12px"><a href="#task-whenall-ensuring-complete-execution" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Task.WhenAll: Ensuring Complete Execution</a></li><li style="padding-left:12px"><a href="#the-black-box-problem-handling-individual-task-failures" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">The Black Box Problem: Handling Individual Task Failures</a></li><li style="padding-left:12px"><a href="#best-practices-for-robust-concurrent-processing" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Best Practices for Robust Concurrent Processing</a></li><li style="padding-left:12px"><a href="#summary-table-whenall-vs-whenany" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Summary Table: WhenAll vs WhenAny</a></li><li style="padding-left:0px"><a href="#iterating-and-learning" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Iterating and Learning</a></li><li style="padding-left:0px"><a href="#experimenting-and-observing" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Experimenting and Observing</a></li><li style="padding-left:12px"><a href="#sample-output" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Sample Output</a></li><li style="padding-left:0px"><a href="#celebrating-success" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Celebrating Success</a></li><li style="padding-left:0px"><a href="#conclusion" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Conclusion</a></li><li style="padding-left:0px"><a href="#ready-for-the-next-level" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Ready for the Next Level?</a></li><li style="padding-left:0px"><a href="#the-semaphoreslim-class" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">The SemaphoreSlim Class</a></li><li style="padding-left:12px"><a href="#semaphore-vs-semaphoreslim-in-net" class="text-sm text-muted-foreground hover:text-primary transition-colors line-clamp-1">Semaphore vs SemaphoreSlim in .NET</a></li></ul></nav></div></aside></div></div></div></article></main><footer class="border-t border-border bg-card"><div class="container-wide py-12"><div class="grid gap-8 md:grid-cols-3"><div><h3 class="font-heading text-lg font-semibold mb-3">Mark Hazleton</h3><p class="text-sm text-muted-foreground leading-relaxed">Technical Solutions Architect helping teams build resilient, scalable systems. Writing about cloud architecture, integration patterns, and engineering practices.</p></div><div><h3 class="font-heading text-lg font-semibold mb-3">Quick Links</h3><ul class="space-y-2 text-sm"><li><a class="text-muted-foreground hover:text-primary transition-colors" href="/" data-discover="true">Home</a></li><li><a class="text-muted-foreground hover:text-primary transition-colors" href="/blog" data-discover="true">Blog</a></li><li><a class="text-muted-foreground hover:text-primary transition-colors" href="/projects" data-discover="true">Projects</a></li><li><a class="text-muted-foreground hover:text-primary transition-colors" href="/github" data-discover="true">GitHub</a></li><li><a class="text-muted-foreground hover:text-primary transition-colors" href="/videos" data-discover="true">Videos</a></li><li><a class="text-muted-foreground hover:text-primary transition-colors" href="/contact" data-discover="true">Contact</a></li></ul></div><div><h3 class="font-heading text-lg font-semibold mb-3">Stay Connected</h3><p class="text-sm text-muted-foreground mb-4">Occasional thoughts on architecture and engineering.</p><div class="flex items-center gap-3"><a href="https://github.com/markhazleton" target="_blank" rel="noopener noreferrer" class="text-muted-foreground hover:text-primary transition-colors" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github h-5 w-5" aria-hidden="true"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a><a href="https://linkedin.com/in/markhazleton" target="_blank" rel="noopener noreferrer" class="text-muted-foreground hover:text-primary transition-colors" aria-label="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin h-5 w-5" aria-hidden="true"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg></a></div></div></div><div class="mt-8 pt-8 border-t border-border text-center text-sm text-muted-foreground"><p> <span>2026</span> <!-- -->Mark Hazleton. Built with curiosity and caffeine.</p><p class="mt-2 text-xs text-muted-foreground/60">Build v<!-- -->18<!-- -->  <!-- -->Jan 24, 2026, 7:07 PM CST</p></div></div></footer></div></div>

    <!-- Crawler-friendly navigation links (hidden from visual browsers) -->
    <nav aria-hidden="true" style="position:absolute;left:-9999px;top:-9999px;">
      <a href="/">Home</a>
      <a href="/blog">Blog</a>
      <a href="/projects">Projects</a>
      <a href="/github">GitHub</a>
      <a href="/videos">Videos</a>
      <a href="/contact">Contact</a>
      <a href="/sitemap">Site Map</a>
    </nav>
  </body>
</html>
